{"componentChunkName":"component---src-templates-blog-post-js","path":"/live/svg动画/","result":{"data":{"site":{"siteMetadata":{"title":"chinley's blog"}},"markdownRemark":{"id":"4e1391ff-4676-50a9-b18b-86afa7be94be","excerpt":"SVG基本介绍 SVG:可缩放矢量图形，矢量图意味着图像能够被无限放大而不失真或者降低质量，并且可以方便地修改内容。SVG代码是XML语言进行描述，可以结合CSS以及JAVASCRIPT进行交互。 SVG有一些预定义的形状元素，可以供开发者使用\n矩形 <rect>\n圆形 <circle>\n椭圆 <ellipse…","html":"<h2>SVG基本介绍</h2>\n<p>SVG:可缩放矢量图形，矢量图意味着图像能够被无限放大而不失真或者降低质量，并且可以方便地修改内容。SVG代码是XML语言进行描述，可以结合CSS以及JAVASCRIPT进行交互。</p>\n<p>SVG有一些预定义的形状元素，可以供开发者使用\n矩形 &#x3C;rect>\n圆形 &#x3C;circle>\n椭圆 &#x3C;ellipse>\n线 &#x3C;line>\n折线 &#x3C;polyline>\n多边形 &#x3C;polygon>\n路径 &#x3C;path></p>\n<p>基本用法：</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span>svg xmlns<span class=\"token operator\">=</span><span class=\"token string\">\"http://www.w3.org/2000/svg\"</span> version<span class=\"token operator\">=</span><span class=\"token string\">\"1.1\"</span><span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>rect width<span class=\"token operator\">=</span><span class=\"token string\">\"300\"</span> height<span class=\"token operator\">=</span><span class=\"token string\">\"100\"</span> style<span class=\"token operator\">=</span><span class=\"token string\">\"fill:rgb(0,0,255);stroke-width:1;stroke:rgb(0,0,0)\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>svg<span class=\"token operator\">></span></code></pre></div>\n<h3>SVG动画</h3>\n<p>SVG除了可绘制矢量图形之外，更重要的特点是动画。其自带的&#x3C;animate>元素，也可以实现动画开发。相比CSS ANIMATION, SVG动画能被更好地“操控”, 丰富动画的表现形式。但如果是更复杂的动画，还是需要使用或借助其他库来完成。</p>\n<p>以下场景的动画，可以优先考虑使用SVG动画：</p>\n<ul>\n<li>描边动画：沿着一个固定的路径去填充、描边</li>\n<li>路径动画：绕着一个路径去运动</li>\n</ul>\n<h3>描边动画</h3>\n<p>很常见的一种描边动画就是圆环倒计时，随着时间，圆环中的蓝色部分逐渐填满整个圆环，或者消失直至整个圆环都是灰色。</p>\n<p><img src=\"https://fxbssdl.kgimg.com/bss/fxams/a66890b5335e052cea6595341e688cfc.png\" alt=\"proto\"></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useRef<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> animateRef <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 动画重新开始</span>\n<span class=\"token comment\">// animateRef.current?.beginElement();</span>\n<span class=\"token comment\">//</span>\n\n<span class=\"token comment\">// 监听动画结束</span>\n<span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  animateRef<span class=\"token operator\">?.</span>current<span class=\"token operator\">?.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'endEvent'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">handleClose</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      animateRef<span class=\"token operator\">?.</span>current<span class=\"token operator\">?.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'endEvent'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">handleClose</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>handleClose<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>svg width<span class=\"token operator\">=</span><span class=\"token string\">\"37\"</span> height<span class=\"token operator\">=</span><span class=\"token string\">\"37\"</span> preserveAspectRatio<span class=\"token operator\">=</span><span class=\"token string\">\"xMinYMin meet\"</span> viewBox<span class=\"token operator\">=</span><span class=\"token string\">\"0,0,37,37\"</span><span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>circle cx<span class=\"token operator\">=</span><span class=\"token string\">\"18\"</span> cy<span class=\"token operator\">=</span><span class=\"token string\">\"18\"</span> r<span class=\"token operator\">=</span><span class=\"token string\">\"17\"</span> strokeWidth<span class=\"token operator\">=</span><span class=\"token string\">\"3\"</span> stroke<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>closeColor<span class=\"token punctuation\">}</span> fill<span class=\"token operator\">=</span><span class=\"token string\">\"none\"</span> transform<span class=\"token operator\">=</span><span class=\"token string\">\"matrix(0,-1,1,0,0,36)\"</span> strokeOpacity<span class=\"token operator\">=</span><span class=\"token string\">\"0.2\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>circle cx<span class=\"token operator\">=</span><span class=\"token string\">\"18\"</span> cy<span class=\"token operator\">=</span><span class=\"token string\">\"18\"</span> r<span class=\"token operator\">=</span><span class=\"token string\">\"17\"</span> strokeWidth<span class=\"token operator\">=</span><span class=\"token string\">\"3\"</span> stroke<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>closeColor<span class=\"token punctuation\">}</span> fill<span class=\"token operator\">=</span><span class=\"token string\">\"none\"</span> transform<span class=\"token operator\">=</span><span class=\"token string\">\"matrix(0,-1,1,0,0,36)\"</span> strokeDasharray<span class=\"token operator\">=</span><span class=\"token string\">\"0 106\"</span> fillOpacity<span class=\"token operator\">=</span><span class=\"token string\">\"1\"</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>animate attributeName<span class=\"token operator\">=</span><span class=\"token string\">\"stroke-dasharray\"</span> begin<span class=\"token operator\">=</span><span class=\"token string\">\"0s\"</span> dur<span class=\"token operator\">=</span><span class=\"token string\">\"8s\"</span> <span class=\"token keyword\">from</span><span class=\"token operator\">=</span><span class=\"token string\">\"106\"</span> to<span class=\"token operator\">=</span><span class=\"token string\">\"0\"</span> fill<span class=\"token operator\">=</span><span class=\"token string\">\"freeze\"</span> fillOpacity<span class=\"token operator\">=</span><span class=\"token string\">\"0\"</span> ref<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>animateRef<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>circle<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>svg<span class=\"token operator\">></span></code></pre></div>\n<p>&#x3C;svg>标签定义了一个宽高为37单位的svg区域，其中视图区域viewBox从(0,0)开始，宽高37个单位。\n但在实际效果中会发现viewBox被svg viewport截掉，因此需要设置一个缩放属性，即<strong>preserveAspectRatio</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">preserveAspectRatio<span class=\"token operator\">=</span><span class=\"token string\">\"xMinYMin meet\"</span></code></pre></div>\n<p>preserveAspectRatio属性的值由两个值组成，“xMidYMid” 和 “meet”。\n<strong>第1个值表示，viewBox如何与SVG viewport对齐；第2个值表示，如何维持高宽比。</strong></p>\n<p>第一个值的组合方式：x(Min/Mid/Max)Y(Min/Mid/Max)\nMin表示靠近原点（0，0）对齐，Mid表示svg viewport中心对齐，Max则是远离原点的对齐。前面的x/Y表示x/Y轴的对齐方式。\nxMinYMin即：viewport和viewBox左边对齐，viewport和viewBox上边缘对齐。</p>\n<p>第二值的选择有：meet/slice/none\nmeet:保持纵横比缩放viewBox适应viewport\nslice: 保持纵横比同时比例小的方向放大填满viewport(通常会被截)\nnone: 扭曲纵横比以充分适应viewport</p>\n<p>分享一位大佬的文章，充分解释了preserveAspectRatio属性值以及示例：\n<a href=\"https://www.zhangxinxu.com/wordpress/2014/08/svg-viewport-viewbox-preserveaspectratio/\">理解SVG viewport,viewBox,preserveAspectRatio缩放</a></p>\n<p>第一个&#x3C;circle>元素实现了半透明部分的圆环，样式半径为17，粗细为3单位，透明度为0.2。\n第二个&#x3C;circle>元素实现了白色部分的圆环，样式半径为17，粗细为3单位，透明度为1。</p>\n<p>因为圆环的动画起点是从<strong>0度逆时针</strong>开始，想要调整角度/顺逆时针动画可以通过<strong>transform属性</strong>或者<strong>css scale</strong>进行翻转。</p>\n<p>因此路径动画的实现主要是通过包裹一个&#x3C;animate />元素，在&#x3C;animate />元素中定义动画的变化</p>\n<h3>路径动画</h3>\n<p>一个元素（物体）沿着特定的路径（轨迹）进行运动。\n使用&#x3C;animationMotion>元素，定义一个path, 就可以使一个元素沿着路径运动。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useState<span class=\"token punctuation\">,</span> useRef<span class=\"token punctuation\">,</span> useCallback<span class=\"token punctuation\">,</span> useEffect<span class=\"token punctuation\">,</span> useMemo <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> point <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">178</span><span class=\"token punctuation\">,</span> <span class=\"token number\">565</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">281</span><span class=\"token punctuation\">,</span> <span class=\"token number\">530</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">386</span><span class=\"token punctuation\">,</span> <span class=\"token number\">511</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">526</span><span class=\"token punctuation\">,</span> <span class=\"token number\">551</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">600</span><span class=\"token punctuation\">,</span> <span class=\"token number\">506</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">605</span><span class=\"token punctuation\">,</span> <span class=\"token number\">376</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">632</span><span class=\"token punctuation\">,</span> <span class=\"token number\">280</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">591</span><span class=\"token punctuation\">,</span> <span class=\"token number\">220</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">576</span><span class=\"token punctuation\">,</span> <span class=\"token number\">160</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">476</span><span class=\"token punctuation\">,</span> <span class=\"token number\">118</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">371</span><span class=\"token punctuation\">,</span> <span class=\"token number\">171</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">256</span><span class=\"token punctuation\">,</span> <span class=\"token number\">163</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">126</span><span class=\"token punctuation\">,</span> <span class=\"token number\">168</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">124</span><span class=\"token punctuation\">,</span> <span class=\"token number\">218</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">103</span><span class=\"token punctuation\">,</span> <span class=\"token number\">288</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">71</span><span class=\"token punctuation\">,</span> <span class=\"token number\">402</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">105</span><span class=\"token punctuation\">,</span> <span class=\"token number\">488</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">SvgAnimation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> line <span class=\"token operator\">=</span> point<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">pre<span class=\"token punctuation\">,</span> cur<span class=\"token punctuation\">,</span>i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> i <span class=\"token operator\">===</span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">M </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>cur<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>cur<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>pre<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> L </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>cur<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>cur<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>boatPath<span class=\"token punctuation\">,</span> setBoatPath<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>line<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> Z</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>svg width<span class=\"token operator\">=</span><span class=\"token string\">\"100%\"</span> height<span class=\"token operator\">=</span><span class=\"token string\">\"100%\"</span> viewBox<span class=\"token operator\">=</span><span class=\"token string\">\"0 0 720 600\"</span> preserveAspectRatio<span class=\"token operator\">=</span><span class=\"token string\">\"xMinYMin meet\"</span><span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>rect x<span class=\"token operator\">=</span><span class=\"token string\">\"0\"</span> y<span class=\"token operator\">=</span><span class=\"token string\">\"0\"</span> width<span class=\"token operator\">=</span><span class=\"token string\">\"40\"</span> height<span class=\"token operator\">=</span><span class=\"token string\">\"40\"</span> fill<span class=\"token operator\">=</span><span class=\"token string\">\"rgba(0, 255, 255, 0.5)\"</span><span class=\"token operator\">></span>\n\n          <span class=\"token operator\">&lt;</span>animateMotion\n            dur<span class=\"token operator\">=</span><span class=\"token string\">\"10s\"</span>\n            rotate<span class=\"token operator\">=</span><span class=\"token string\">\"auto\"</span> <span class=\"token comment\">// 在路径移动的同时，是否旋转元素</span>\n            fill<span class=\"token operator\">=</span><span class=\"token string\">\"freeze\"</span>\n            restart<span class=\"token operator\">=</span><span class=\"token string\">\"whenNotActive\"</span> <span class=\"token comment\">// 动画执行完成了才能再重新开始动画</span>\n          <span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span>mpath xlinkHref<span class=\"token operator\">=</span><span class=\"token string\">\"#boat-path\"</span><span class=\"token operator\">/</span><span class=\"token operator\">></span> <span class=\"token comment\">// 复用路径</span>\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>animateMotion<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>rect<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>path id<span class=\"token operator\">=</span><span class=\"token string\">\"boat-path\"</span>  d<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>boatPath<span class=\"token punctuation\">}</span> fill<span class=\"token operator\">=</span><span class=\"token string\">\"none\"</span> stroke<span class=\"token operator\">=</span><span class=\"token string\">\"green\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>svg<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>代码里react元素就会沿着path定义的路径移动</p>\n<p>其中的rotate属性，用于定义元素相对于移动路线的方向</p>\n<ul>\n<li>auto：元素会根据路径的方向自动旋转</li>\n<li>auto-reverse： 元素会根据路径的方向加上180度的角度自动旋转</li>\n<li>某个数字： 元素以这个数字为旋转角度沿着路径移动</li>\n</ul>\n<p>restart属性：值有always/whenNotActive/never</p>\n<ul>\n<li>always: 可以中断动画重新开始</li>\n<li>whenNotActive： 动画结束才能重新开始</li>\n<li>never: 动画都不能重新开始</li>\n</ul>\n<h4>控制移动的路径动画</h4>\n<p>上一个路径动画的例子是自执行的动画，如果想要通过js控制svg元素沿着路径1/n步移动，可以参考下面的代码：</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useState<span class=\"token punctuation\">,</span> useRef<span class=\"token punctuation\">,</span> useCallback<span class=\"token punctuation\">,</span> useEffect<span class=\"token punctuation\">,</span> useMemo <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> point <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">178</span><span class=\"token punctuation\">,</span> <span class=\"token number\">565</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">281</span><span class=\"token punctuation\">,</span> <span class=\"token number\">530</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">386</span><span class=\"token punctuation\">,</span> <span class=\"token number\">511</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">526</span><span class=\"token punctuation\">,</span> <span class=\"token number\">551</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">600</span><span class=\"token punctuation\">,</span> <span class=\"token number\">506</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">605</span><span class=\"token punctuation\">,</span> <span class=\"token number\">376</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">632</span><span class=\"token punctuation\">,</span> <span class=\"token number\">280</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">591</span><span class=\"token punctuation\">,</span> <span class=\"token number\">220</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">576</span><span class=\"token punctuation\">,</span> <span class=\"token number\">160</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> \n  <span class=\"token punctuation\">[</span><span class=\"token number\">476</span><span class=\"token punctuation\">,</span> <span class=\"token number\">118</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">371</span><span class=\"token punctuation\">,</span> <span class=\"token number\">171</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">256</span><span class=\"token punctuation\">,</span> <span class=\"token number\">163</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">126</span><span class=\"token punctuation\">,</span> <span class=\"token number\">168</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">124</span><span class=\"token punctuation\">,</span> <span class=\"token number\">218</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">103</span><span class=\"token punctuation\">,</span> <span class=\"token number\">288</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">71</span><span class=\"token punctuation\">,</span> <span class=\"token number\">402</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">105</span><span class=\"token punctuation\">,</span> <span class=\"token number\">488</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">SvgDemo</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> defaultPosIdx <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> onBoatMoveFinish<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> props<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> line <span class=\"token operator\">=</span> point<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">pre<span class=\"token punctuation\">,</span> cur<span class=\"token punctuation\">,</span>i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> i <span class=\"token operator\">===</span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">M </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>cur<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>cur<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>pre<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> L </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>cur<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>cur<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> _boatPoints <span class=\"token operator\">=</span> point<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// 将点对为正下方</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>item<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">-</span> <span class=\"token number\">50</span><span class=\"token punctuation\">,</span> item<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">-</span> <span class=\"token number\">80</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> boatline <span class=\"token operator\">=</span> point<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">pre<span class=\"token punctuation\">,</span> cur<span class=\"token punctuation\">,</span>i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> i <span class=\"token operator\">===</span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">M </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>cur<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>cur<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>pre<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> L </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>cur<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>cur<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> realPath <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>boatline<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> Z</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> boatPath <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>line<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> Z</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>posIdx<span class=\"token punctuation\">,</span> setPosIdx<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span>defaultPosIdx<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>boatPosition<span class=\"token punctuation\">,</span> setBoatPosition<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> x<span class=\"token operator\">:</span> _boatPoints<span class=\"token operator\">?.</span><span class=\"token punctuation\">[</span>defaultPosIdx<span class=\"token punctuation\">]</span><span class=\"token operator\">?.</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> y<span class=\"token operator\">:</span> _boatPoints<span class=\"token operator\">?.</span><span class=\"token punctuation\">[</span>defaultPosIdx<span class=\"token punctuation\">]</span><span class=\"token operator\">?.</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// const [idx, setIdx] = useState(0);</span>\n\n  <span class=\"token keyword\">const</span> originPosition <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span>defaultPosIdx<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> destination <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span>defaultPosIdx<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> times <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> isInit <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> animateXRef <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> animateYRef <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> prevIdx <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isInit<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      isInit<span class=\"token punctuation\">.</span>current <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> defaultPosIdx<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> posIdx <span class=\"token operator\">===</span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> _boatPoints<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span> <span class=\"token operator\">:</span> posIdx <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>posIdx<span class=\"token punctuation\">,</span> defaultPosIdx<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> runBoatAnimation <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>times<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      onBoatMoveFinish<span class=\"token operator\">?.</span><span class=\"token punctuation\">(</span>posIdx<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    times<span class=\"token punctuation\">.</span>current <span class=\"token operator\">-=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">setBoatPosition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> nextIdx <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>posIdx <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">%</span> _boatPoints<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">const</span> nextPos <span class=\"token operator\">=</span> _boatPoints<span class=\"token operator\">?.</span><span class=\"token punctuation\">[</span>nextIdx<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">const</span> newPosition <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> x<span class=\"token operator\">:</span> nextPos<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> y<span class=\"token operator\">:</span> nextPos<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n      animateYRef<span class=\"token operator\">?.</span>current<span class=\"token operator\">?.</span><span class=\"token function\">beginElement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      animateXRef<span class=\"token operator\">?.</span>current<span class=\"token operator\">?.</span><span class=\"token function\">beginElement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> newPosition<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">setPosIdx</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">pre</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>pre <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">%</span> _boatPoints<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>posIdx<span class=\"token punctuation\">,</span> _boatPoints<span class=\"token punctuation\">,</span> onBoatMoveFinish<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">moveBoat</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">step</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    originPosition<span class=\"token punctuation\">.</span>current <span class=\"token operator\">=</span> posIdx<span class=\"token punctuation\">;</span>\n    times<span class=\"token punctuation\">.</span>current <span class=\"token operator\">=</span> step<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> des <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>originPosition<span class=\"token punctuation\">.</span>current <span class=\"token operator\">+</span> times<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">)</span> <span class=\"token operator\">%</span> _boatPoints<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n    destination<span class=\"token punctuation\">.</span>current <span class=\"token operator\">=</span> des<span class=\"token punctuation\">;</span>\n    <span class=\"token function\">runBoatAnimation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    animateXRef<span class=\"token operator\">?.</span>current<span class=\"token operator\">?.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'endEvent'</span><span class=\"token punctuation\">,</span> runBoatAnimation<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      animateXRef<span class=\"token operator\">?.</span>current<span class=\"token operator\">?.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'endEvent'</span><span class=\"token punctuation\">,</span> runBoatAnimation<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>runBoatAnimation<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">\"list-container\"</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>button onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token function\">moveBoat</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>next<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>svg width<span class=\"token operator\">=</span><span class=\"token string\">\"100%\"</span> height<span class=\"token operator\">=</span><span class=\"token string\">\"100%\"</span> viewBox<span class=\"token operator\">=</span><span class=\"token string\">\"0 0 720 600\"</span> preserveAspectRatio<span class=\"token operator\">=</span><span class=\"token string\">\"xMinYMin meet\"</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>image \n          x<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>boatPosition<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">}</span>\n          y<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>boatPosition<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">}</span>\n          width<span class=\"token operator\">=</span><span class=\"token string\">\"100\"</span>\n          height<span class=\"token operator\">=</span><span class=\"token string\">\"100\"</span>\n          fill<span class=\"token operator\">=</span><span class=\"token string\">\"rgba(0, 255, 255, 0.5)\"</span>\n          xlinkHref<span class=\"token operator\">=</span><span class=\"token string\">\"https://picnew13.photophoto.cn/20181228/shiliangshouhuikatonglunchuan-31308405_1.jpg\"</span>\n        <span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>animate\n            ref<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>animateXRef<span class=\"token punctuation\">}</span>\n            attributeName<span class=\"token operator\">=</span><span class=\"token string\">\"x\"</span>\n            <span class=\"token keyword\">from</span><span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>_boatPoints<span class=\"token punctuation\">[</span>prevIdx<span class=\"token punctuation\">]</span><span class=\"token operator\">?.</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span>\n            to<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>_boatPoints<span class=\"token punctuation\">[</span>posIdx<span class=\"token punctuation\">]</span><span class=\"token operator\">?.</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span>\n            fill<span class=\"token operator\">=</span><span class=\"token string\">\"freeze\"</span>\n            repeatCount<span class=\"token operator\">=</span><span class=\"token string\">\"1\"</span>\n            dur<span class=\"token operator\">=</span><span class=\"token string\">\"3s\"</span> <span class=\"token comment\">// 这里可以修改动画持续时间</span>\n          <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>animate\n            ref<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>animateYRef<span class=\"token punctuation\">}</span>\n            attributeName<span class=\"token operator\">=</span><span class=\"token string\">\"y\"</span>\n            <span class=\"token keyword\">from</span><span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>_boatPoints<span class=\"token punctuation\">[</span>prevIdx<span class=\"token punctuation\">]</span><span class=\"token operator\">?.</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span>\n            to<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>_boatPoints<span class=\"token punctuation\">[</span>posIdx<span class=\"token punctuation\">]</span><span class=\"token operator\">?.</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span>\n            fill<span class=\"token operator\">=</span><span class=\"token string\">\"freeze\"</span>\n            dur<span class=\"token operator\">=</span><span class=\"token string\">\"3s\"</span> <span class=\"token comment\">// 这里可以修改动画持续时间</span>\n          <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>image<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>path d<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>boatPath<span class=\"token punctuation\">}</span> fill<span class=\"token operator\">=</span><span class=\"token string\">\"none\"</span> stroke<span class=\"token operator\">=</span><span class=\"token string\">\"green\"</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>path d<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>realPath<span class=\"token punctuation\">}</span> fill<span class=\"token operator\">=</span><span class=\"token string\">\"none\"</span> stroke<span class=\"token operator\">=</span><span class=\"token string\">\"none\"</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>svg<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","frontmatter":{"title":"SVG动画实践","date":"July 16, 2023","description":null}},"previous":{"fields":{"slug":"/leetcode/二叉搜索树/"},"frontmatter":{"title":"二叉搜索树"}},"next":null},"pageContext":{"id":"4e1391ff-4676-50a9-b18b-86afa7be94be","previousPostId":"1c5cb00e-2a7c-50eb-b91c-2c4e8407bc93","nextPostId":null}},"staticQueryHashes":["2841359383","788015585"]}