{"componentChunkName":"component---src-templates-blog-post-js","path":"/npm/","result":{"data":{"site":{"siteMetadata":{"title":"chinley's blog"}},"markdownRemark":{"id":"e5936b24-44a3-5283-9411-317ca2473607","excerpt":"npm内部机制和核心原理   优先安装依赖到当前的项目目录，使得不同项目依赖自成体系。   npm安装流程：   1.执行npm install后，首先检查npm配置。npm配置文件优先级：项目级.npmrc > 用户级.npmrc > 全局级.npmrc > npm内置的.npmrc…","html":"<h2>npm内部机制和核心原理</h2>\n<p>  优先安装依赖到当前的项目目录，使得不同项目依赖自成体系。</p>\n<p>  npm安装流程：</p>\n<p>  1.执行npm install后，首先检查npm配置。npm配置文件优先级：项目级.npmrc > 用户级.npmrc > 全局级.npmrc > npm内置的.npmrc</p>\n<p>  2.检查完配置后，检查package-lock.json文件是否和package.json文件声明的依赖一致：</p>\n<p>   a.一致，直接使用package-lock.json文件，从缓存或者网络中加载依赖</p>\n<p>   b.不一致，按照npm版本处理，不同版本处理方式不同。</p>\n<p>  3.如果没有package-lock.json文件，则根据packge,json构建递归依赖树，按照依赖树下载资源，在下载过程中就会检查是否有相关资源缓存。</p>\n<p>   a.存在缓存资源，将缓存资源解压到node_modules中</p>\n<p>   b.不存在，从npm下载包，检验包的完整，添加到缓存中，并解压到node_modules.</p>\n<p>  最后生成packge-lock.json文件</p>\n<p>  本地开发node_modules下的npm包，npm link</p>\n<p>  npx vs npm，npx 可以快速执行node_modules包下的命令</p>\n<p>  npx eslint —init vs ./node_modules/.bin/eslint —init</p>\n<h2>yarn vs npm</h2>\n<p>  yarn是更新的包管理工具，用于弥补一些npm的不足, 出现时机在npm v3时</p>\n<p>  npm缺陷：</p>\n<ol>\n<li>npm i慢</li>\n<li>\n<p>同一个项目，安装的版本无法保证一致性</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&quot;5.0.3&quot;, // 指定5.0.3版本\n&quot;~5.0.3&quot;, // 安装5.0.x中的最新版本\n&quot;^5.0.3&quot; // 安装5.x.x中的最新版本</code></pre></div>\n</li>\n<li>包会在同一时间下载和安装，中途某个时候，一个包抛出了一个错误，但是npm会继续下载和安装包。因为npm会把所有的日志输出到终端，有关错误包的错误信息就会在一大堆npm打印的警告中丢失掉，并且你甚至永远不会注意到实际发生的错误。</li>\n</ol>\n<p>  yarn优点：</p>\n<ol>\n<li>不同于npm串行安装，yarn并行安装</li>\n<li>安装版本统一</li>\n<li>更简洁的输出</li>\n<li>更语义化 npm install react —save vs\tyarn add react</li>\n</ol>\n<p>  npm dedupe 简化依赖树</p>\n<h2>为什么要lockfiles</h2>\n<p>  lockfiles出现的原因：完整准确地还原项目依赖</p>","frontmatter":{"title":"前端基础建设与架构","date":"June 10, 2021","description":"学习笔记: npm"}},"previous":{"fields":{"slug":"/leetcode/"},"frontmatter":{"title":"最长回文字符串"}},"next":{"fields":{"slug":"/leetcode/path/"},"frontmatter":{"title":"路径问题"}}},"pageContext":{"id":"e5936b24-44a3-5283-9411-317ca2473607","previousPostId":"77c388e5-7ccf-515d-ad60-f84d5d103439","nextPostId":"70e049d3-723d-546b-be1d-1daeac35f30f"}},"staticQueryHashes":["2841359383","788015585"]}